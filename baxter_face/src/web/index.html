<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<script async src="https://docs.opencv.org/3.4/opencv.js" type="text/javascript"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

<script type="text/javascript" type="text/javascript">



// This function connects to the rosbridge server running on the local computer on port 9090
var rbServer = new ROSLIB.Ros({
    url : 'ws://localhost:9090'
 });

 // This function is called upon the rosbridge connection event
 rbServer.on('connection', function() {});

// This function is called when there is an error attempting to connect to rosbridge
rbServer.on('error', function(error) {});

// This function is called when the connection to rosbridge is closed
rbServer.on('close', function() {});

/*
 var baxterClient = new ROSLIB.ActionClient({
   ros : rbServer,
   serverName : '/web_connect',
   actionName : 'actionlib_tutorials/FibonacciAction'
 });
 */

 function sendMsg(name, type, msg) {
  var cmdVel = new ROSLIB.Topic({
    ros : rbServer,
    name : name,
    messageType : type
  });

  var cmd = new ROSLIB.Message({
    data : msg
  });

  cmdVel.publish(cmd);
 }

function pan(cmd){
  sendMsg("/web_pan", 'std_msgs/Float32', cmd)
}


// Emotion - Afraid, Confused, Happy, Joy, Neutral, Reactive, Sad, Sassy, Silly, Sleep, Surprise, Worried
// Color - Blue, Gray, Green, Orange, Purple, Red, White, Yellow, 
// Position - NE, SE, SW, NW, Sleep(Open, Closed)
function face(emotion, position, color){
  let img = emotion + position + color + ".jpg"
  sendMsg("/web_face", 'std_msgs/String', img)
}

</script>

</head>


<body>

<!--
<form name="ctrlPanel">
<h1>Baxter's Face</h1>
<iframe src="http://0.0.0.0:8080/stream_viewer?topic=/bax/cam/image_raw" width="750" height="750">
</iframe>
<button id="sendMsg" type="button" onclick="pubMessage()">Publish Image</button>
</form>
<div id="feedback"></div>

-->



<div class="ui two column doubling stackable grid" style="background-color: blue; margin: 0px !important; width: 100%; height: 100%">
  <div class="column" style="background-color: lightgrey; width:25%">
    <div class="ui raised card centered" style="width: 100%">
      <img class="ui fluid image" src="http://0.0.0.0:8080/stream?topic=/bax/cam/image_raw">
    </div>
    <div class="ui raised card centered" style="width: 100%">
      <img class="ui fluid image" src="http://0.0.0.0:8080/stream?topic=/bax/cam/image_raw">
    </div>
    <div class="ui segment">
      <button onclick="face('Afraid', 'Blink', 'Blue')" class="ui labeled icon button">
        <i class="pause icon"></i>
        Pause
      </button>
      <button onclick="pan(0.5)" class="ui right labeled icon button">
        <i class="right arrow icon"></i>
        Next
      </button>
    </div>
  </div>
  <div class="column">
  </div>
</div>


<div class="ui one column doubling stackable grid" style="display:none; background-color: rgb(248, 247, 247); margin: 0px !important; width: 100%; height: 100%; padding: 0px">
  <div style="width: 100%; max-height: 90%; padding: 0; margin: 0px">
    <img class="ui fluid image" src="http://0.0.0.0:8080/stream?topic=/bax/cam/image_raw" style='height: 100%; width: 100%; object-fit: fill' >
  </div>

  <div class="ui segment" style="width: 100%; padding: 5px; margin: 0; background-color: rgb(248, 247, 247); border: 0">
    <button class="ui labeled icon button">
      <i class="pause icon"></i>
      Pause
    </button>
    <buttonon class="ui right labeled icon button">
      <i class="right arrow icon"></i>
      Next
    </button>
  </div>
</div>
  
</div>


</body>

<script>

function setFullViewSize() {
  document.getElementById('fullImage').height = "30";
  //console.log(fullViewDiv)
}

//setFullViewSize()

</script>


</html>
